function ChartAxes(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var x=attrs.valuesX;x&&chartCtrl.addXAxisValues(x);var xs=attrs.valuesXs,xsValues={};if(xs){xsItems=xs.split(",");for(var xsI in xsItems)xsItem=xsItems[xsI].split(":"),xsValues[xsItem[0]]=xsItem[1];chartCtrl.addXSValues(xsValues)}var y=attrs.y,y2=attrs.y2,yAxis={};if(y2){var items=y2.split(",");for(var item in items)yAxis[items[item]]="y2";if(y){var yItems=y.split(",");for(var yItem in yItems)yAxis[yItems[yItem]]="y"}chartCtrl.addYAxis(yAxis)}}}}function ChartAxis(){return{require:"^c3chart",restrict:"E",scope:{},transclude:!0,template:"<div ng-transclude></div>",replace:!0,link:function(scope,element,attrs,chartCtrl){attrs.axisRotate&&chartCtrl.rotateAxis()}}}function ChartAxisX(){return{require:"^c3chart",restrict:"E",scope:{},transclude:!0,template:"<div ng-transclude></div>",replace:!0,link:function(scope,element,attrs,chartCtrl){var position=attrs.axisPosition,label=attrs.axisLabel,axis={label:{text:label,position:position}},paddingLeft=attrs.paddingLeft,paddingRight=attrs.paddingRight;(paddingLeft||paddingRight)&&(paddingLeft=paddingLeft||0,paddingRight=paddingRight||0,axis.padding={left:parseInt(paddingLeft),right:parseInt(paddingRight)});var height=attrs.axisHeight;height&&(axis.height=parseInt(height)),"false"===attrs.show&&(axis.show=!1),"true"===attrs.axisLocaltime&&(axis.localtime=!0);var max=attrs.axisMax;max&&(axis.max=max);var min=attrs.axisMin;min&&(axis.min=min);var type=attrs.axisType;type&&(axis.type=type),chartCtrl.addAxisProperties("x",axis);var xFormat=attrs.axisXFormat;xFormat&&chartCtrl.setXFormat(xFormat)}}}function ChartAxisXTick(){return{require:"^c3chart",restrict:"E",scope:{tickFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var tick={},count=attrs.tickCount;count&&(tick.count=count);var culling=attrs.tickCulling;culling&&(culling=angular.lowercase(culling),"true"===culling?tick.culling=!0:"false"===culling&&(tick.culling=!1));var cullingMax=attrs.tickCullingMax;cullingMax&&(tick.culling={max:parseInt(cullingMax)});var multiline=attrs.tickMultiline;multiline&&(multiline=angular.lowercase(multiline),"true"===multiline?tick.multiline=!0:"false"===multiline&&(tick.multiline=!1));var centered=attrs.tickCentered;centered&&(centered=angular.lowercase(centered),"true"===centered?tick.centered=!0:"false"===centered&&(tick.centered=!1));var rotate=attrs.tickRotate;rotate&&(tick.rotate=rotate);var fit=attrs.tickFit;fit&&(fit=angular.lowercase(fit),"true"===fit?tick.fit=!0:"false"===fit&&(tick.fit=!1));var tickValues=attrs.tickValues;tickValues&&tickValues&&(tickValues.indexOf(",")>-1?tick.values=tickValues.split(","):tick.values=tickValues);var outer=attrs.tickOuter;outer&&(outer=angular.lowercase(outer),"true"===outer?tick.outer=!0:"false"===outer&&(tick.outer=!1));var format=attrs.format;format&&(tick.format=d3.format(format));var formatTime=attrs.formatTime;formatTime&&(tick.format=d3.time.format(formatTime)),chartCtrl.addXTick(tick),attrs.tickFormatFunction&&chartCtrl.addXTickFormatFunction(scope.tickFormatFunction())}}}function ChartAxisY(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var id=attrs.axisId,position=attrs.axisPosition,label=attrs.axisLabel;id=void 0==id?"y":id;var axis={label:{text:label,position:position}};"false"===attrs.show?axis.show=!1:"y2"===id&&(axis.show=!0);var paddingTop=attrs.paddingTop,paddingBottom=attrs.paddingBottom;(paddingTop||paddingBottom)&&(paddingTop=paddingTop||0,paddingBottom=paddingBottom||0,axis.padding={top:parseInt(paddingTop),bottom:parseInt(paddingBottom)});var axisMax=attrs.axisMax,axisMin=attrs.axisMin;axisMax&&(axis.max=parseInt(axisMax)),axisMin&&(axis.min=parseInt(axisMin)),"true"===attrs.axisInverted&&(axis.inverted=!0),"true"===attrs.axisInner&&(axis.inner=!0);var axisCenter=attrs.axisCenter;axisCenter&&(axis.center=parseInt(axisCenter)),chartCtrl.addAxisProperties(id,axis)}}}function ChartAxisYTick(){return{require:"^c3chart",restrict:"E",scope:{tickFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var tick={},count=attrs.tickCount;count&&(tick.count=count);var outer=attrs.tickOuter;outer&&(outer=angular.lowercase(outer),"true"===outer?tick.outer=!0:"false"===outer&&(tick.outer=!1));var tickValues=attrs.tickValues;tickValues&&(tickValues.indexOf(",")>-1?tick.values=tickValues.split(","):tick.values=tickValues);var format=attrs.tickFormat;format&&(tick.format=d3.format(format)),chartCtrl.addYTick(tick),attrs.tickFormatFunction&&chartCtrl.addYTickFormatFunction(scope.tickFormatFunction())}}}function ChartBar(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var bar={};attrs.width&&(bar.width=parseInt(attrs.width)),attrs.ratio&&(bar.width||(bar.width={}),bar.width.ratio=parseFloat(attrs.ratio)),attrs.zerobased&&(bar.zerobased="true"===attrs.zerobased),chartCtrl.addBar(bar)}}}function C3Chart($timeout){return{restrict:"E",controller:"ChartController",scope:{bindto:"@bindtoId",showLabels:"@showLabels",labelsFormatFunction:"&",showSubchart:"@showSubchart",enableZoom:"@enableZoom",chartData:"=chartData",chartColumns:"=chartColumns",chartX:"=chartX",callbackFunction:"&",emptyLabel:"@emptyLabel"},template:"<div><div id='{{bindto}}'></div><div ng-transclude></div></div>",replace:!0,transclude:!0,link:function(scope,element,attrs,chartCtrl){var paddingTop=attrs.paddingTop,paddingRight=attrs.paddingRight,paddingBottom=attrs.paddingBottom,paddingLeft=attrs.paddingLeft,sortData=attrs.sortData,transitionDuration=attrs.transitionDuration,initialConfig=attrs.initialConfig;paddingTop&&chartCtrl.addPadding("top",paddingTop),paddingRight&&chartCtrl.addPadding("right",paddingRight),paddingBottom&&chartCtrl.addPadding("bottom",paddingBottom),paddingLeft&&chartCtrl.addPadding("left",paddingLeft),sortData&&chartCtrl.addSorting(sortData),attrs.labelsFormatFunction&&chartCtrl.addDataLabelsFormatFunction(scope.labelsFormatFunction()),attrs.callbackFunction&&chartCtrl.addChartCallbackFunction(scope.callbackFunction()),transitionDuration&&chartCtrl.addTransitionDuration(transitionDuration),initialConfig&&chartCtrl.addInitialConfig(initialConfig),$timeout(function(){chartCtrl.showGraph()})}}}function ChartColors(){return{require:"^c3chart",restrict:"E",scope:{colorFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var pattern=attrs.colorPattern;pattern&&chartCtrl.addColorPatterns(pattern.split(","));var thresholds=attrs.thresholds;thresholds&&chartCtrl.addColorThresholds(thresholds.split(",")),attrs.colorFunction&&chartCtrl.addColorFunction(scope.colorFunction())}}}function ChartColumn(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var column=attrs.columnValues.split(",");column.unshift(attrs.columnId),chartCtrl.addColumn(column,attrs.columnType,attrs.columnName,attrs.columnColor)}}}function ChartController($scope,$timeout){function resetVars(){$scope.chart=null,$scope.columns=[],$scope.types={},$scope.regions={},$scope.axis={},$scope.axes={},$scope.padding=null,$scope.emptyLabel=null,$scope.xValues=null,$scope.xFormat=null,$scope.xsValues=null,$scope.xTick=null,$scope.yTick=null,$scope.names=null,$scope.grid=null,$scope.legend=null,$scope.tooltip=null,$scope.chartSize=null,$scope.colors=null,$scope.colorThresholds=null,$scope.gauge=null,$scope.jsonKeys=null,$scope.groups=null,$scope.sorting=null,$scope.transitionDuration=null,$scope.initialConfig=null,$scope.selection=null}function showGraph(){var config={};$scope.initialConfig&&(config=$scope.initialConfig),config.bindto="#"+$scope.bindto,config.data=config.data||{},$scope.xValues&&(config.data.x=$scope.xValues),$scope.xsValues&&(config.data.xs=$scope.xsValues),$scope.columns&&(config.data.columns=$scope.columns),$scope.xFormat&&(config.data.xFormat=$scope.xFormat),config.data.types=config.data.types||$scope.types,config.data.axes=config.data.axes||$scope.axes,$scope.names&&(config.data.names=$scope.names),null!=$scope.emptyLabel&&(config.data.empty={label:{text:$scope.emptyLabel}}),null!=$scope.padding&&(config.padding=$scope.padding),null!=$scope.sorting&&("null"==$scope.sorting?config.data.order=null:config.data.order=$scope.sorting),null!=$scope.transitionDuration&&(config.transition=config.transition||{},config.transition.duration=$scope.transitionDuration),$scope.showLabels&&"true"===$scope.showLabels&&(config.data.labels=!0),$scope.dataLabelsFormatFunction&&(config.data.labels=config.data.labels||{},config.data.labels.format=$scope.dataLabelsFormatFunction),null!=$scope.groups&&(config.data.groups=$scope.groups),$scope.showSubchart&&"true"===$scope.showSubchart&&(config.subchart={show:!0}),$scope.enableZoom&&"true"===$scope.enableZoom&&(config.zoom={enabled:!0}),config.axis=config.axis||$scope.axis,$scope.xTick&&(config.axis.x.tick=$scope.xTick),$scope.xTickFormatFunction&&(config.axis.x.tick=config.axis.x.tick||{},config.axis.x.tick.format=$scope.xTickFormatFunction),$scope.xType&&(config.axis.x.type=$scope.xType),$scope.yTick&&(config.axis.y.tick=$scope.yTick),$scope.yTickFormatFunction&&(config.axis.y.tick=config.axis.y.tick||{},config.axis.y.tick.format=$scope.yTickFormatFunction),null!=$scope.grid&&(config.grid=$scope.grid),null!=$scope.legend&&(config.legend=$scope.legend),null!=$scope.tooltip?config.tooltip=$scope.tooltip:config.tooltip={},$scope.tooltipTitleFormatFunction&&(config.tooltip.format=config.tooltip.format||{},config.tooltip.format.title=$scope.tooltipTitleFormatFunction),$scope.tooltipNameFormatFunction&&(config.tooltip.format=config.tooltip.format||{},config.tooltip.format.name=$scope.tooltipNameFormatFunction),$scope.tooltipValueFormatFunction&&(config.tooltip.format=config.tooltip.format||{},config.tooltip.format.value=$scope.tooltipValueFormatFunction),$scope.tooltipContentFormatFunction&&(config.tooltip.contents=$scope.tooltipContentFormatFunction),null!=$scope.chartSize&&(config.size=$scope.chartSize),null!=$scope.colors&&(config.data.colors=$scope.colors),$scope.colorFunction&&(config.data.color=$scope.colorFunction),null!=$scope.colorPatterns&&(void 0===config.color&&(config.color={}),config.color.pattern=$scope.colorPatterns),null!=$scope.colorThresholds&&(void 0===config.color&&(config.color={}),config.color.threshold={values:$scope.colorThresholds}),null!=$scope.gauge?config.gauge=$scope.gauge:config.gauge={},$scope.gaugeLabelFormatFunction&&(config.gauge.label=config.gauge.label||{},config.gauge.label.format=$scope.gaugeLabelFormatFunction),null!=$scope.point&&(config.point=$scope.point),null!=$scope.bar&&(config.bar=$scope.bar),null!=$scope.line&&(config.line=$scope.line),null!=$scope.regions&&(config.data.regions=$scope.regions),null!=$scope.pie&&(config.pie=$scope.pie),$scope.pieLabelFormatFunction&&(config.pie.label=config.pie.label||{},config.pie.label.format=$scope.pieLabelFormatFunction),null!=$scope.donut?config.donut=$scope.donut:config.donut={},$scope.donutLabelFormatFunction&&(config.donut.label=config.donut.label||{},config.donut.label.format=$scope.donutLabelFormatFunction),null!=$scope.onInit&&(config.oninit=$scope.onInit),null!=$scope.onMouseover&&(config.onmouseover=$scope.onMouseover),null!=$scope.onMouseout&&(config.onmouseout=$scope.onMouseout),null!=$scope.onRendered&&(config.onrendered=$scope.onRendered),null!=$scope.onResize&&(config.onresize=$scope.onResize),null!=$scope.onResized&&(config.onresized=$scope.onResized),null!=$scope.dataOnClick&&(config.data.onclick=function(data,element){$scope.$apply(function(){$scope.dataOnClick({data:data})})}),null!=$scope.dataOnMouseover&&(config.data.onmouseover=function(data){$scope.$apply(function(){$scope.dataOnMouseover({data:data})})}),null!=$scope.dataOnMouseout&&(config.data.onmouseout=function(data){$scope.$apply(function(){$scope.dataOnMouseout({data:data})})}),null!=$scope.selection&&(config.data.selection=$scope.selection),$scope.config=config,$scope.chartData&&$scope.chartColumns?$scope.$watch("chartData",function(){loadChartData()},!0):($scope.chart=c3.generate($scope.config),$scope.chartCallbackFunction&&$scope.chartCallbackFunction($scope.chart)),$scope.$on("$destroy",function(){$timeout(function(){angular.isDefined($scope.chart)&&($scope.chart=$scope.chart.destroy(),resetVars())},1e4)})}function addColumn(column,columnType,columnName,columnColor){$scope.columns.push(column),addColumnProperties(column[0],columnType,columnName,columnColor)}function addYAxis(yAxis){$scope.axes=yAxis,$scope.axis.y2||($scope.axis.y2={show:!0})}function addDataLabelsFormatFunction(dataLabelsFormatFunction){$scope.dataLabelsFormatFunction=dataLabelsFormatFunction}function addChartCallbackFunction(chartCallbackFunction){$scope.chartCallbackFunction=chartCallbackFunction}function addTransitionDuration(transitionDuration){$scope.transitionDuration=transitionDuration}function addXAxisValues(xValues){$scope.xValues=xValues}function addXSValues(xsValues){$scope.xsValues=xsValues}function addAxisProperties(id,axis){$scope.axis[id]=axis}function addXTick(tick){$scope.xTick=tick}function addXTickFormatFunction(xTickFormatFunction){$scope.xTickFormatFunction=xTickFormatFunction}function addXType(type){$scope.xType=type}function addYTick(tick){$scope.yTick=tick}function addYTickFormatFunction(yTickFormatFunction){$scope.yTickFormatFunction=yTickFormatFunction}function rotateAxis(){$scope.axis.rotated=!0}function addEmptyLabel(text){$scope.emptyLabel=text}function addPadding(side,amount){null==$scope.padding&&($scope.padding={}),$scope.padding[side]=parseInt(amount)}function addSorting(sorting){$scope.sorting=sorting}function addGrid(axis){null==$scope.grid&&($scope.grid={}),null==$scope.grid[axis]&&($scope.grid[axis]={}),$scope.grid[axis].show=!0}function addGridLine(axis,value,text,gridClass,position){null==$scope.grid&&($scope.grid={}),"x"===axis?(void 0===$scope.grid.x&&($scope.grid.x={}),void 0===$scope.grid.x.lines&&($scope.grid.x.lines=[])):(void 0===$scope.grid.y&&($scope.grid.y={}),void 0===$scope.grid.y.lines&&($scope.grid.y.lines=[]));var theGridLine={};theGridLine.value=isNaN(+value)?value:+value,theGridLine.text=text,gridClass&&(theGridLine.class=gridClass),position&&(theGridLine.position=position),"y2"===axis?(theGridLine.axis="y2",$scope.grid.y.lines.push(theGridLine)):$scope.grid[axis].lines.push(theGridLine)}function addLegend(legend){$scope.legend=legend}function addTooltip(tooltip){$scope.tooltip=tooltip}function addTooltipTitleFormatFunction(tooltipTitleFormatFunction){$scope.tooltipTitleFormatFunction=tooltipTitleFormatFunction}function addTooltipNameFormatFunction(tooltipNameFormatFunction){$scope.tooltipNameFormatFunction=tooltipNameFormatFunction}function addTooltipValueFormatFunction(tooltipValueFormatFunction){$scope.tooltipValueFormatFunction=tooltipValueFormatFunction}function addTooltipContentFormatFunction(tooltipContentFormatFunction){$scope.tooltipContentFormatFunction=tooltipContentFormatFunction}function addSize(chartSize){$scope.chartSize=chartSize}function addColorPatterns(colors){$scope.colorPatterns=colors}function addColorThresholds(thresholds){$scope.colorThresholds=thresholds,$scope.colors&&($scope.colors.threshold={values:$scope.colorThresholds})}function addColorFunction(colorFunction){$scope.colorFunction=colorFunction}function addOnInitFunction(onInitFunction){$scope.onInit=onInitFunction}function addOnMouseoverFunction(onMouseoverFunction){$scope.onMouseover=onMouseoverFunction}function addOnMouseoutFunction(onMouseoutFunction){$scope.onMouseout=onMouseoutFunction}function addOnRenderedFunction(onRederedFunction){$scope.onRendered=onRederedFunction}function addOnResizeFunction(onResizeFunction){$scope.onResize=onResizeFunction}function addOnResizedFunction(onResizedFuncton){$scope.onResized=onResizedFuncton}function addDataOnClickFunction(theFunction){$scope.dataOnClick=theFunction}function addDataOnMouseoverFunction(theFunction){$scope.dataOnMouseover=theFunction}function addDataOnMouseoutFunction(theFunction){$scope.dataOnMouseout=theFunction}function addGauge(gauge){$scope.gauge=gauge}function addGaugeLabelFormatFunction(gaugeLabelFormatFunction){$scope.gaugeLabelFormatFunction=gaugeLabelFormatFunction}function addBar(bar){$scope.bar=bar}function addLine(line){$scope.line=line}function addRegion(id,intervals){$scope.regions[id]=intervals}function addPie(pie){$scope.pie=pie}function addPieLabelFormatFunction(pieLabelFormatFunction){$scope.pieLabelFormatFunction=pieLabelFormatFunction}function addDonut(donut){$scope.donut=donut}function addDonutLabelFormatFunction(donutLabelFormatFunction){$scope.donutLabelFormatFunction=donutLabelFormatFunction}function addGroup(group){null==$scope.groups&&($scope.groups=[]),$scope.groups.push(group)}function addPoint(point){$scope.point=point}function hideGridFocus(){null==$scope.grid&&($scope.grid={}),$scope.grid.focus={show:!1}}function setXFormat(xFormat){$scope.xFormat=xFormat}function addInitialConfig(initialConfig){$scope.initialConfig=initialConfig}function addColumnProperties(id,columnType,columnName,columnColor){void 0!==columnType&&($scope.types[id]=columnType),void 0!==columnName&&(null===$scope.names&&($scope.names={}),$scope.names[id]=columnName),void 0!==columnColor&&(null===$scope.colors&&($scope.colors={}),$scope.colors[id]=columnColor)}function addSelection(selection){$scope.selection=selection}function loadChartData(){$scope.jsonKeys={},$scope.jsonKeys.value=[],angular.forEach($scope.chartColumns,function(column){$scope.jsonKeys.value.push(column.id),addColumnProperties(column.id,column.type,column.name,column.color)}),$scope.chartX&&($scope.jsonKeys.x=$scope.chartX.id),$scope.names&&($scope.config.data.names=$scope.names),$scope.colors&&($scope.config.data.colors=$scope.colors),$scope.groups&&($scope.config.data.groups=$scope.groups),$scope.config.data.keys=$scope.jsonKeys,$scope.config.data.json=$scope.chartData,$scope.chartIsGenerated?($scope.config.data.unload=!0,$scope.chart.load($scope.config.data)):($scope.chart=c3.generate($scope.config),$scope.chartIsGenerated=!0,$scope.chartCallbackFunction&&$scope.chartCallbackFunction($scope.chart))}this.showGraph=showGraph,this.addColumn=addColumn,this.addAxisProperties=addAxisProperties,this.rotateAxis=rotateAxis,this.addPadding=addPadding,this.addSorting=addSorting,this.addSize=addSize,this.addEmptyLabel=addEmptyLabel,this.addColorPatterns=addColorPatterns,this.addColorThresholds=addColorThresholds,this.addColorFunction=addColorFunction,this.addGrid=addGrid,this.addGridLine=addGridLine,this.hideGridFocus=hideGridFocus,this.addLegend=addLegend,this.addTooltip=addTooltip,this.addTooltipTitleFormatFunction=addTooltipTitleFormatFunction,this.addTooltipNameFormatFunction=addTooltipNameFormatFunction,this.addTooltipValueFormatFunction=addTooltipValueFormatFunction,this.addTooltipContentFormatFunction=addTooltipContentFormatFunction,this.addYAxis=addYAxis,this.addYTick=addYTick,this.addYTickFormatFunction=addYTickFormatFunction,this.addXAxisValues=addXAxisValues,this.addXTick=addXTick,this.addXTickFormatFunction=addXTickFormatFunction,this.addXType=addXType,this.addXSValues=addXSValues,this.addChartCallbackFunction=addChartCallbackFunction,this.addInitialConfig=addInitialConfig,this.addDataLabelsFormatFunction=addDataLabelsFormatFunction,this.addTransitionDuration=addTransitionDuration,this.addGauge=addGauge,this.addGaugeLabelFormatFunction=addGaugeLabelFormatFunction,this.addBar=addBar,this.addLine=addLine,this.addRegion=addRegion,this.addPie=addPie,this.addPieLabelFormatFunction=addPieLabelFormatFunction,this.addDonut=addDonut,this.addDonutLabelFormatFunction=addDonutLabelFormatFunction,this.addGroup=addGroup,this.addPoint=addPoint,this.addOnInitFunction=addOnInitFunction,this.addOnMouseoverFunction=addOnMouseoverFunction,this.addOnMouseoutFunction=addOnMouseoutFunction,this.addOnRenderedFunction=addOnRenderedFunction,this.addOnResizeFunction=addOnResizeFunction,this.addOnResizedFunction=addOnResizedFunction,this.addDataOnClickFunction=addDataOnClickFunction,this.addDataOnMouseoverFunction=addDataOnMouseoverFunction,this.addDataOnMouseoutFunction=addDataOnMouseoutFunction,this.setXFormat=setXFormat,this.addSelection=addSelection,resetVars()}function ChartDonut(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var donut={};attrs.showLabel&&(donut.label={show:"true"===attrs.showLabel}),attrs.thresholdLabel&&(donut.label||(donut.label={}),donut.label.threshold=parseFloat(attrs.thresholdLabel)),attrs.expand&&(donut.expand="true"===attrs.expand),attrs.width&&(donut.width=parseInt(attrs.width)),attrs.title&&(donut.title=attrs.title),chartCtrl.addDonut(donut),attrs.labelFormatFunction&&chartCtrl.addDonutLabelFormatFunction(scope.labelFormatFunction())}}}function ChartEvents(){return{require:"^c3chart",restrict:"E",scope:{onInit:"&",onMouseover:"&",onMouseout:"&",onResize:"&",onResized:"&",onRendered:"&",onClickData:"&",onMouseoverData:"&",onMouseoutData:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){attrs.onInit&&chartCtrl.addOnInitFunction(scope.onInit),attrs.onMouseover&&chartCtrl.addOnMouseoverFunction(scope.onMouseover),attrs.onMouseout&&chartCtrl.addOnMouseoutFunction(scope.onMouseout),attrs.onResize&&chartCtrl.addOnResizeFunction(scope.onResize),attrs.onResized&&chartCtrl.addOnResizedFunction(scope.onResized),attrs.onRendered&&chartCtrl.addOnRenderedFunction(scope.onRendered),attrs.onClickData&&chartCtrl.addDataOnClickFunction(scope.onClickData),attrs.onMouseoverData&&chartCtrl.addDataOnMouseoverFunction(scope.onMouseoverData),attrs.onMouseoutData&&chartCtrl.addDataOnMouseoutFunction(scope.onMouseoutData)}}}function ChartGauge(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var gauge={};attrs.min&&(gauge.min=parseInt(attrs.min)),attrs.max&&(gauge.max=parseInt(attrs.max)),attrs.width&&(gauge.width=parseInt(attrs.width)),attrs.units&&(gauge.units=attrs.units),attrs.showLabel&&(gauge.label={show:"true"===attrs.showLabel}),attrs.expand&&(gauge.expand="true"===attrs.expand),chartCtrl.addGauge(gauge),attrs.labelFormatFunction&&chartCtrl.addGaugeLabelFormatFunction(scope.labelFormatFunction())}}}function ChartGrid(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var showX=attrs.showX;showX&&"true"===showX&&chartCtrl.addGrid("x");var showY=attrs.showY;showY&&"true"===showY&&chartCtrl.addGrid("y");var showY2=attrs.showY2;showY2&&"true"===showY2&&chartCtrl.addGrid("y2");var showFocus=attrs.showFocus;showFocus&&"false"===showFocus&&chartCtrl.hideGridFocus()},transclude:!0,template:"<div ng-transclude></div>"}}function ChartGridOptional(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var axisId=attrs.axisId,value=attrs.gridValue,text=attrs.gridText,gridClass=attrs.gridClass,position=attrs.position;chartCtrl.addGridLine(axisId,value,text,gridClass,position)}}}function ChartGroup(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var group=attrs.groupValues.split(",");chartCtrl.addGroup(group)}}}function ChartLegend(){return{require:"^c3chart",restrict:"E",scope:{onMouseover:"&",onMouseout:"&",onClick:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var legend=null,show=attrs.showLegend;if(show&&"false"===show)legend={show:!1};else{var position=attrs.legendPosition;position&&(legend={position:position});var inset=attrs.legendInset;if(inset){legend={position:"inset",inset:{anchor:inset}};var insetX=attrs.legendInsetX;insetX&&(legend.inset.x=parseInt(insetX));var insetY=attrs.legendInsetY;insetY&&(legend.inset.y=parseInt(insetY));var insetStep=attrs.legendInsetStep;insetStep&&(legend.inset.step=parseInt(insetStep))}}attrs.onMouseover&&(legend=legend||{},legend.item=legend.item||{},legend.item.onmouseover=function(data){scope.$apply(function(){scope.onMouseover({data:data})})}),attrs.onMouseout&&(legend=legend||{},legend.item=legend.item||{},legend.item.onmouseout=function(data){scope.$apply(function(){scope.onMouseout({data:data})})}),attrs.onClick&&(legend=legend||{},legend.item=legend.item||{},legend.item.onclick=function(data){scope.$apply(function(){scope.onClick({data:data})})}),null!=legend&&chartCtrl.addLegend(legend)}}}function ChartLine(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var line={};attrs.stepType&&(line.step=line.step||{},line.step.type=attrs.stepType),attrs.connectNull&&(line.connectNull="true"===attrs.connectNull),chartCtrl.addLine(line)}}}function ChartPie(){return{require:"^c3chart",restrict:"E",scope:{labelFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var pie={};attrs.showLabel&&(pie.label={show:"true"===attrs.showLabel}),attrs.thresholdLabel&&(pie.label||(pie.label={}),pie.label.threshold=parseFloat(attrs.thresholdLabel)),attrs.expand&&(pie.expand="true"===attrs.expand),chartCtrl.addPie(pie),attrs.labelFormatFunction&&chartCtrl.addPieLabelFormatFunction(scope.labelFormatFunction())}}}function ChartPoints(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var point={};attrs.showPoint&&(point.show="true"===attrs.showPoint),attrs.pointExpandEnabled&&(point.focus||(point.focus={expand:{}}),point.focus.expand.enabled="false"!==attrs.pointsFocusEnabled),attrs.pointExpandRadius&&(point.focus||(pie.focus={expand:{}}),point.focus.expand.r=parseInt(attrs.pointFocusRadius)),attrs.pointRadius&&(point.r=parseInt(attrs.pointRadius)),attrs.pointSelectRadius&&(point.select={r:parseInt(attrs.pointSelectRadius)}),chartCtrl.addPoint(point)}}}function ChartRegion(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var style="dashed",starts=[],ends=[],intervals=[];attrs.regionStyle&&(style=attrs.regionStyle),attrs.regionStarts&&(starts=attrs.regionStarts.split(",")),attrs.regionEnds&&(ends=attrs.regionEnds.split(",")),starts.length>ends.length&&intervals.push({start:starts.pop(),style:style}),starts.length<ends.length&&intervals.push({end:ends.shift(),style:style}),starts.forEach(function(value,i){intervals.push({start:starts[i],end:ends[i],style:style})}),chartCtrl.addRegion(attrs.regionId,intervals)}}}function Selection(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var enabled=attrs.enabled,grouped=attrs.grouped,multiple=attrs.multiple;if(enabled&&"true"===enabled){var selection={enabled:!0};grouped&&"true"===grouped&&(selection.grouped=!0),multiple&&"true"===multiple&&(selection.multiple=!0),chartCtrl.addSelection(selection)}}}}function ChartSize(){return{require:"^c3chart",restrict:"E",scope:{},replace:!0,link:function(scope,element,attrs,chartCtrl){var chartSize=null,width=attrs.chartWidth,height=attrs.chartHeight;(width||height)&&(chartSize={},width&&(chartSize.width=parseInt(width)),height&&(chartSize.height=parseInt(height)),chartCtrl.addSize(chartSize))}}}function ChartTooltip(){return{require:"^c3chart",restrict:"E",scope:{valueFormatFunction:"&",nameFormatFunction:"&",titleFormatFunction:"&",contentFormatFunction:"&"},replace:!0,link:function(scope,element,attrs,chartCtrl){var tooltip=null,show=attrs.showTooltip,joined=(attrs.hideTooltipTitle,attrs.joinedTooltip);if(show&&"false"===show)tooltip={show:!1};else{var grouped=attrs.groupTooltip;grouped&&"false"===grouped&&(tooltip={grouped:!1})}joined&&"true"===joined&&(tooltip=tooltip||{},tooltip.contents=function(d,defaultTitleFormat,defaultValueFormat,color){var text,i,title,value,name,bgcolor,CLASS,$$=this,config=$$.config,titleFormat=config.tooltip_format_title||defaultTitleFormat,nameFormat=config.tooltip_format_name||function(name){return name},valueFormat=config.tooltip_format_value||defaultValueFormat;for(CLASS={tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name"},i=d[0].x;i<d[0].x+1;i++)d[i]&&(d[i].value||0===d[i].value)&&(text||(title=titleFormat?titleFormat(d[i].x):d[i].x,text="<table class='"+CLASS.tooltip+"'>"+(title||0===title?"<tr><th colspan='2'>"+title+"</th></tr>":"")),void 0!==(value=valueFormat(d[i].value,d[i].ratio,d[i].id,d[i].index))&&(name=nameFormat(d[i].name,d[i].ratio,d[i].id,d[i].index),bgcolor=$$.levelColor?$$.levelColor(d[i].value):color(d[i].id),text+="<tr class='"+CLASS.tooltipName+"-"+d[i].id+"'>",text+="<td class='name'><span style='background-color:"+bgcolor+"'></span>"+name+"</td>",text+="<td class='value'>"+value+"</td>",text+="</tr>"));return text+"</table>"}),null!=tooltip&&chartCtrl.addTooltip(tooltip),attrs.titleFormatFunction&&chartCtrl.addTooltipTitleFormatFunction(scope.titleFormatFunction()),attrs.nameFormatFunction&&chartCtrl.addTooltipNameFormatFunction(scope.nameFormatFunction()),attrs.valueFormatFunction&&chartCtrl.addTooltipValueFormatFunction(scope.valueFormatFunction()),attrs.contentFormatFunction&&chartCtrl.addTooltipContentFormatFunction(scope.contentFormatFunction())}}}angular.module("mainDirectives",[]).directive("ngConfirmClick",[function(){return{link:function(scope,element,attr){var msg=attr.ngConfirmClick||"Are you sure?",clickAction=attr.confirmedClick;element.bind("click",function(event){window.confirm(msg)&&scope.$apply(clickAction)})}}}]),angular.module("menus",[]).factory("menus",function(){return{}}).directive("seceonMainMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/index.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarTopologyMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/topologyMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarProvisioningMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/provisioningMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarAdministrationMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/administrationMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarSystemMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/systemMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarAlertsMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/alertsMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarAlertMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/alertMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarDashboardMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/dashboardMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarBehaviorAnalyticsMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/behaviorAnalyticsMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarThreatHuntingMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/threatHuntingMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonSidebarReportsMenu",function(){return{scope:!0,restrict:"A",templateUrl:"views/menus/Sidebar/reportsMenu.html",controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonLorum",function(){return{scope:!0,restrict:"E",templateUrl:"views/test/testLorum.html",controller:["$scope",function($scope){}]}}),angular.module("partials",[]).factory("partials",function(){return{}
}).directive("default-user-setup",["partials",function(partials){return{restrict:"E",templateUrl:"views/utilities/users/setup/index.html"}}]).directive("loginDialog",["AUTHENTICATION_EVENTS",function(AUTHENTICATION_EVENTS){return{restrict:"A",template:'<div ng-if="visible" ng-include="\'views/login/index.html\'">',link:function(scope){var showDialog=function(){scope.visible=!0};scope.visible=!1,scope.$on(AUTHENTICATION_EVENTS.notAuthenticated,showDialog),scope.$on(AUTHENTICATION_EVENTS.sessionTimeout,showDialog)}}}]).directive("kibanaStyleActivityIndicator",["partials",function(partials){return{restrict:"E",templateUrl:"views/templates/kibana-style-activity-indicator.html",controller:["$scope",function($scope){}]}}]).directive("popUpActivityIndicator",["partials",function(partials){return{restrict:"E",templateUrl:"views/templates/popup-activity-indicator.html"}}]).directive("seceonPanelError",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/error-panel.html",controller:["$scope",function($scope){}]}}]).directive("seceonPanelMiddle",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/middle-panel.html",controller:["$scope",function($scope){}]}}]).directive("seceonPanelRight",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/right-panel.html",controller:["$scope",function($scope){}]}}]).directive("seceonPanel",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/menu-panel.html",controller:["$scope",function($scope){}]}}]).directive("seceonPanelNotAuthorized",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/panel-not-authorized.html"}}]).directive("seceonPanelNotAvailable",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/panel-not-available.html",controller:["$scope",function($scope){}]}}]).directive("seceonPanelChordNotAvailable",["partials",function(partials){return{restrict:"E",templateUrl:"views/panels/panel-chord-not-available.html",controller:["$scope",function($scope){}]}}]).directive("seceonTable",["partials",function(partials){return{restrict:"E",templateUrl:"views/help/index.html",controller:["$scope",function($scope){}]}}]).directive("seceonKibanaHelp",["partials",function(partials){return{restrict:"E",templateUrl:"views/help/index.html",controller:["$scope",function($scope){}]}}]).directive("seceonAccordion",["partials",function(partials){return{restrict:"E",templateUrl:"views/test/accordionView.html",controller:["$scope",function($scope){}]}}]).directive("seceonTimePicker",function(){return{restrict:"E",templateUrl:"views/templates/time-picker.html",controller:["$scope",function($scope){$scope.mode="quick",$scope.modes=["quick","relative","absolute"],$scope.quickLists=["quick","relative","absolute"];$scope.setMode=function(thisMode){$scope.mode=thisMode,$scope.$emit("setModeForMenu",$scope.mode)},$scope.setTab=function(thisTab){$scope.$emit("setTabForMenu",thisTab)},$scope.setTabContent=function(thisTab){$scope.$emit("setTabContentForMenu",thisTab)},$scope.setToNow=function(){},function(){$scope.setMode($scope.mode)}()}]}}).directive("chordColorPalette",function(){return{restrict:"A",scope:!0,link:function($scope,$element,$attrs){$scope.showColorPalette=function(){var colorArray=["#9C6744","#C9BEB9","#CFA07E","#C4BAA1","#C2B6BF","#121212","#8FB5AA","#85889E","#9C7989","#91919C","#242B27","#212429","#99677B","#36352B","#33332F","#2B2B2E","#2E1F13","#2B242A","#918A59","#6E676C","#6E4752","#6B4A2F","#998476","#8A968D","#968D8A","#968D96","#CC855C","#967860","#929488","#949278","#A0A3BD","#BD93A1","#65666B","#6B5745","#6B6664","#695C52","#56695E","#69545C","#565A69","#696043","#63635C","#636150","#333131","#332820","#302D30","#302D1F","#2D302F","#CFB6A3","#362F2A"];$scope.colorPalette="<div id='chordPalette' chord-color-palette>";for(var i=0;i<colorArray.length;i++)$scope.colorPalette+="<div style='margin-bottom: 2px;width:20px;height:20px;background-color:"+colorArray[i]+";'> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+colorArray[i]+"</div>";$scope.colorPalette+="<div ng-transclude></div></div>",$element.replaceWith($scope.colorPalette)}}}}),angular.module("seceon-bootstrap-ui",[]).factory("seceon-bootstrap-ui",function(){return{}}).directive("seceonModalDialog",function(){return{restrict:"E",templateUrl:function(elem,attr){return"views/templates/modal-dialog-"+attr.type+".html"},controller:["$scope","$location",function($scope,$location){}]}}).directive("seceonHelpDialog",function(){return{restrict:"E",templateUrl:function(elem,attr){return"views/templates/modal-dialog-help.html"},controller:["$scope","$location",function($scope,$location){}]}}),angular.module("seceonApp").directive("chordDiagram",["$window","matrixFactory",function($window,matrixFactory){return{link:function($scope,$el,$attr){function resize(){var width=$el.parent()[0].clientWidth;svg.attr({width:width,height:width/(size[0]/size[1])})}var size=[650,650],marg=[20,60,60,60],dims=[];dims[0]=size[0]-marg[1]-marg[3],dims[1]=size[1]-marg[0]-marg[2];var colors=d3.scale.ordinal().range(["#1f77b4","#aec7e8","#2ca02c","#98df8a","#9467bd","#c5b0d5","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]),chord=d3.layout.chord().padding(.06).sortChords(d3.descending).sortGroups(d3.descending),matrix=matrixFactory.chordMatrix().layout(chord).filter(function(item,r,c){return item.source1===r.name&&item.source2===c.name}).reduce(function(items,r,c){var value;return value=items[0]?items.reduce(function(m,n){return r===c?m+(n.flow1+n.flow2):m+(n.source1===r.name?n.flow1:n.flow2)},0):0,{value:value,data:items}}),innerRadius=dims[1]/2-100,arc=d3.svg.arc().innerRadius(innerRadius).outerRadius(innerRadius+20),path=d3.svg.chord().radius(innerRadius),svg=d3.select($el[0]).append("svg").attr("class","chart").attr({width:size[0]+"px",height:size[1]+"px"}).attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+size[0]+" "+size[1]),container=svg.append("g").attr("class","container").attr("transform","translate("+(dims[0]/2+marg[3])+","+(dims[1]/2+marg[0])+")"),messages=svg.append("text").attr("class","messages").attr("transform","translate(10, 10)").text("Updating...");$scope.drawChords=function(data,alerts){function arcClick(d){d3.event.preventDefault(),d3.event.stopPropagation(),$scope.showGroup(d._id,d.value),$scope.updateTooltip(matrix.read(d)),resetChords()}function chordClick(d){d3.event.preventDefault(),d3.event.stopPropagation(),$scope.showChart(d.source._id,d.target._id),$scope.updateTooltip(matrix.read(d))}function chordMouseover(d){d3.event.preventDefault(),d3.event.stopPropagation(),dimChords(d),d3.select("#flow-message").style("opacity",1),$scope.updateTooltip(matrix.read(d))}function hideTooltip(){d3.event.preventDefault(),d3.event.stopPropagation(),d3.select("#flow-message").style("opacity",0),resetChords()}function resetChords(){d3.event.preventDefault(),d3.event.stopPropagation(),container.selectAll("path.chord").style("opacity",.9)}function dimChords(d){d3.event.preventDefault(),d3.event.stopPropagation(),container.selectAll("path.chord").style("opacity",function(p){return d.source?p._id===d._id?.9:.1:p.source._id===d._id||p.target._id===d._id?.9:.1})}messages.attr("opacity",1),messages.transition().duration(1e3).attr("opacity",0),matrix.data(data).resetKeys().addKeys(["source","target"]).update();var tip=d3.tip().attr("class","d3-tip").offset([-10,-5]).html(function(d){var result=$.grep(data,function(e){return d._id===e.source1}),result2=$.grep(data,function(e){return d._id===e.source2});return result.length>0&&d._id===result[0].source1?"subnetwork"===sessionStorage.getItem("scope_level")||"servers"===sessionStorage.getItem("scope_level")?d._id+"  ("+result[0].srcAssetGroup+")":d._id:"subnetwork"===sessionStorage.getItem("scope_level")||"servers"===sessionStorage.getItem("scope_level")?d._id+"  ("+result2[0].dstAssetGroup+")":d._id}),tipChord=d3.tip().attr("class","d3-tip").html(function(d){return d._id+" to "+d.target});d3.tip().attr("class","d3-tip").html(function(d){return d.flow1});svg.call(tip),svg.call(tipChord),d3.selectAll("g.group").remove();var groups=container.selectAll("g.group").data(matrix.groups(),function(d){return d._id}),gEnter=groups.enter().append("g").attr("class","group");svg.selectAll("marker").data(matrix.groups()).enter().append("svg:marker").attr("id",function(d){return"marker_"+d._id}).attr("markerHeight",5).attr("markerWidth",5).attr("markerUnits","strokeWidth").attr("orient","auto").attr("refX",0).attr("refY",0).attr("viewBox","-5 -5 10 10").append("svg:path").attr("d",function(d){return gEnter.path}).attr("fill","black");gEnter.append("path").style("pointer-events","auto").style("fill",function(d){return $.grep(alerts,function(e){return"subnetwork"===$scope.level||"servers"===$scope.level?e._source.entity.entity_id===d._id:e._source.entity.entity_group===d._id}).length>0?"red":colors(d._id)}).attr("d",arc).attr("marker-start",function(d){return"url(#marker_"+d._id+")"}).attr("marker-end",function(d){return"url(#marker_"+d._id+")"}).on("click",arcClick).on("mouseover",dimChords).on("mouseout",resetChords),gEnter.append("text").attr("dy",".35em").on("mouseover",tip.show).on("mouseout",tip.hide).on("blur",tip.hide).on("click",arcClick).text(function(d){return d._id.length>15?d._id.substring(0,15)+" ...":d._id}).attr("class",function(d){var result=$.grep(alerts,function(e){return"subnetwork"===$scope.level||"servers"===$scope.level?e._source.entity.entity_id===d._id:e._source.entity.entity_group===d._id}),result2=$.grep($scope.sourceNetworkHosts,function(e){return e===d._id});return result.length>0?"network-alert":result2.length>0&&"networks"!==$scope.level?"network-group":"network-default"}).attr("fill",function(d){if($.grep(alerts,function(e){return"subnetwork"===$scope.level||"servers"===$scope.level?e._source.entity.entity_id===d._id:e._source.entity.entity_group===d._id}).length>0)return"red"}),groups.select("path").transition().duration(500).attrTween("d",matrix.groupTween(arc)),groups.select("text").transition().duration(500).attr("transform",function(d){return d.angle=(d.startAngle+d.endAngle)/2,"rotate("+(180*d.angle/Math.PI-90)+") translate("+(innerRadius+26)+")"+(d.angle>Math.PI?" rotate(180)":" rotate(0)")}).attr("text-anchor",function(d){return d.angle>Math.PI?"end":"begin"}),groups.exit().select("path").remove(),groups.exit().select("marker").remove(),groups.exit().transition().duration(1e3).style("opacity",0).remove(),d3.selectAll("path.chord").remove();var chords=container.selectAll("path.chord").data(matrix.chords(),function(d){return d._id});chords.enter().append("path").attr("class","chord").style("fill",function(d){return colors(d.source._id)}).attr("d",path).on("click",chordClick).on("mouseover",chordMouseover).on("mouseout",hideTooltip),chords.transition().duration(500).attrTween("d",matrix.chordTween(path)),chords.exit().remove()},resize(),$window.addEventListener("resize",function(){resize()})},restrict:"EA"}}]),angular.module("histogramCharts",[]).factory("histogramCharts",function(){return{}}).directive("histogramChart",["partials",function(partials){return{restrict:"E",$scope:!0,templateUrl:"views/charts/histogram/standard/index.html",link:function($scope,element,attrs){attrs.$observe("width",function(v){})},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){var query="",chart="",unique=function(origArr){var found,x,y,newArr=[],origLen=origArr.length;for(x=0;x<origLen;x++){for(found=void 0,y=0;y<newArr.length;y++)if(origArr[x]===newArr[y]){found=!0;break}found||newArr.push(origArr[x])}return newArr};$scope.redrawChart=function(height,width){},$scope.createChart=function(baseUrl,source,target){$scope.closeAlert(),$("#traffic-histogram").empty(),$scope.histogramData=[],$scope.isHistogramTable=!1,$rootScope.currentSource=source,$rootScope.currentTarget=target,$scope.group1=[],$scope.group2=[];var theGridRoute="/netflows/",theElasticsearchIndex=$scope.netflowsRealtimeIndex,period=sessionStorage.getItem("scope_timePeriod_currentPeriodStart");period=period.replace("now-",""),"4h"!==period&&"12h"!==period&&"24h"!==period&&"1w"!==period&&"2d"!==period&&"3d"!==period&&"4d"!==period&&"5d"!==period&&"6d"!==period||(theGridRoute="/preaggregation/",theElasticsearchIndex=$scope.preAggregationIndex),query=theGridRoute+"selectbysubnetwork/index="+theElasticsearchIndex+"/start="+encodeURIComponent(sessionStorage.getItem("scope_timeperiod_epoch_start"))+"/end="+encodeURIComponent(sessionStorage.getItem("scope_timeperiod_epoch_end"))+"/source="+encodeURIComponent(source)+"/target="+encodeURIComponent(target),"networks"===$scope.level&&(query=query.replace("selectbysubnetwork","selectbynetworkshistogram"));var theStart=0,theEnd=5e12;switch(sessionStorage.getItem("selectedMBCategory")){case"1":theStart=0,theEnd=1048576;break;case"2":theStart=1048576,theEnd=5242880;break;case"3":theStart=5242880,theEnd=10485760;break;case"4":theStart=10485760,theEnd=20971520;break;case"5":theStart=20971520,theEnd=52428800;break;case"6":theStart=52428800,theEnd=104857600;break;case"7":theStart=104857600,theEnd=1048576e3;break;case"8":theStart=1048576e3,theEnd=524288e4}query+="/bstart="+theStart+"/bend="+theEnd;var theHistogramInterval=(sessionStorage.getItem("scope_timeperiod_epoch_start"),sessionStorage.getItem("scope_timeperiod_epoch_end"),"/interval=minute/mindoc=0");"24h"===period&&(theHistogramInterval="/interval=hour/mindoc=0"),"2d"===period&&(theHistogramInterval="/interval=day/mindoc=0"),"3d"===period&&(theHistogramInterval="/interval=day/mindoc=0"),"4d"===period&&(theHistogramInterval="/interval=day/mindoc=0"),"5d"===period&&(theHistogramInterval="/interval=day/mindoc=0"),"6d"===period&&(theHistogramInterval="/interval=day/mindoc=0"),"1w"===period&&(theHistogramInterval="/interval=day/mindoc=0"),query+=theHistogramInterval,$rootScope.$broadcast("startedProgress","fountain");var theURL=$scope.baseUrl+query;$scope.networksResource=$resource(theURL),$scope.networksResource.query().$promise.then(function(data){var source1,source2="",timestamp=new Date,timestampSeconds="";if("Elasticsearch error"===data[0])$rootScope.$broadcast("finishedProgress","fountain"),$scope.alert("danger",data[0]+": "+data[1]);else if(data[0].agg1.buckets.length>0){for(var i=0;i<data[0].agg1.buckets.length;i++){timestamp=data[0].agg1.buckets[i].key_as_string,timestampSeconds=data[0].agg1.buckets[i].key;for(var j=0;j<data[0].agg1.buckets[i].agg2.buckets.length;j++){source1=data[0].agg1.buckets[i].agg2.buckets[j].key;for(var k=0;k<data[0].agg1.buckets[i].agg2.buckets[j].agg3.buckets.length;k++)source2=data[0].agg1.buckets[i].agg2.buckets[j].agg3.buckets[k].key,(source1===source&&source2===target||source1===target&&source2===source)&&$scope.histogramData.push({source1:source1,source2:source2,flow1:data[0].agg1.buckets[i].agg2.buckets[j].agg3.buckets[k].bytes.value,flow2:data[0].agg1.buckets[i].agg2.buckets[j].agg3.buckets[k].doc_count,timestamp:timestamp,timestampEpoch:timestampSeconds})}}$scope.histogramData.sort(function(a,b){return a.timestamp>b.timestamp?1:b.timestamp>a.timestamp?-1:0});var source1Total=0,source2Total=0,sourceTimestamp="",minTimestamp=null,maxTimestamp=null;if($scope.secondsDivisor=0,$scope.histogramData.length>0){var minTimestamp=$scope.histogramData[0].timestampEpoch,maxTimestamp=$scope.histogramData[$scope.histogramData.length-1].timestampEpoch;$scope.secondsDivisor=(maxTimestamp-minTimestamp)/1e3}switch(0===$scope.secondsDivisor&&($scope.secondsDivisor=1),navigator.language){case"en-US":$scope.dateFormatter="%m-%d";break;case"en-GB":case"en-IN":$scope.dateFormatter="%d-%m";break;case"de":case"el":$scope.dateFormatter="%d.%m";break;case"jp":default:$scope.dateFormatter="%d-%m"}$scope.dateTracker=[],$scope.timeseries=["date"],$scope.timeseriesTemp=[],$scope.isTimeseriesDays=[],$scope.group1=[source],$scope.group2=[target],$scope.isSingleDay=!1;for(var timeStampParse="",x=0;x<$scope.histogramData.length;x++){var theDatePart=$scope.histogramData[x].timestamp.substring(0,10);$scope.timeseriesTemp.push(theDatePart)}for(var x=0;x<$scope.timeseriesTemp.length;x++);if($scope.isTimeseriesDays=unique($scope.timeseriesTemp),$scope.isTimeseriesDays.length<=2){$scope.timeseriesTemp=[],$scope.isSingleDay=!0;for(var x=0;x<$scope.histogramData.length;x++){var removeUTC=$scope.histogramData[x].timestamp.replace("T"," ");removeUTC=removeUTC.replace(".000Z","");$scope.timeseriesTemp.indexOf(removeUTC);$scope.timeseriesTemp.push(removeUTC)}}$scope.timeseriesTemp=unique($scope.timeseriesTemp),$scope.timeseriesTemp.sort(function(a,b){return a>b?1:b>a?-1:0});for(var theSource1Total=0,theSource2Total=0,sourceTimestamp2="",x=0;x<$scope.timeseriesTemp.length;x++){sourceTimestamp=$scope.timeseriesTemp[x];for(var y=0;y<$scope.histogramData.length;y++){if(!0===$scope.isSingleDay){var matchUTC=$scope.histogramData[y].timestamp.replace("T"," ");matchUTC=matchUTC.replace(".000Z",""),timeStampParse=matchUTC}else timeStampParse=$scope.histogramData[y].timestamp.substring(0,10);sourceTimestamp2=$scope.histogramData[y].timestamp,timeStampParse===$scope.timeseriesTemp[x]?$scope.histogramData[y].source1===source?source1Total+=$scope.histogramData[y].flow1:$scope.histogramData[y].source1===target&&(source2Total+=$scope.histogramData[y].flow1):(sourceTimestamp2=$scope.histogramData[y].timestamp,(source1Total>0||source2Total>0)&&(!0===$scope.isSingleDay?$scope.timeseries.push(new Date($scope.histogramData[y-1].timestamp).getTime()):$scope.timeseries.push(new Date($scope.timeseriesTemp[x]).getTime())),source1Total>0?(theSource1Total=source1Total/1048576,$scope.group1.push(theSource1Total.toFixed(4)),source1Total=0):source1Total=0,source2Total>0?(theSource2Total=source2Total/1048576,$scope.group2.push(theSource2Total.toFixed(4)),source2Total=0):source2Total=0)}}var theTickCount=0;switch(period){case"15m":case"30m":case"1h":case"4h":case"12h":case"24h":case"2d":case"3d":case"4d":case"5d":case"6d":theTickCount=8;break;case"7d":case"1w":theTickCount=7}if(!0===$scope.isSingleDay?$scope.timeseries.push(new Date(sourceTimestamp2).getTime()):($scope.timeseries.push(new Date(sourceTimestamp).getTime()),theTickCount=$scope.timeseries.length-1),theSource1Total=source1Total/1048576,$scope.group1.push(theSource1Total.toFixed(4)),theSource2Total=source2Total/1048576,$scope.group2.push(theSource2Total.toFixed(4)),$scope.isSingleDay){switch(navigator.language){case"en-US":$scope.dateFormatter="%m-%d (%H:%M)";break;case"en-GB":case"en-IN":$scope.dateFormatter="%d-%m (%H:%M)";break;case"de":case"el":$scope.dateFormatter="%d.%m (%H:%M)";break;case"jp":default:$scope.dateFormatter="%d-%m (%H:%M)"}var seconds=$scope.timeseries[1],theDate=new Date(seconds);theDate.toString()}if($scope.chartPeriodTitle=$rootScope.periodTitle,$scope.group1.length<$scope.timeseries.length)for(var theG1Diff=$scope.timeseries.length-$scope.group1.length-1,i=0;i<theG1Diff;i++)$scope.group1.push(0);if($scope.group2.length<$scope.timeseries.length)for(var theG2Diff=$scope.timeseries.length-$scope.group2.length-1,i=0;i<theG2Diff;i++)$scope.group2.push(0);$scope.group2[0]===$scope.group1[0]&&($scope.group2.length=0,$scope.group2=$scope.group1);for(var x=0;x<$scope.timeseries.length;x++);for(var x=0;x<$scope.group1.length;x++);for(var x=0;x<$scope.group2.length;x++);for(var group1Count=0,group2Count=0,i=1;i<$scope.group1.length;i++)group1Count+=new Number($scope.group1[i]);for(var i=1;i<$scope.group2.length;i++)group2Count+=new Number($scope.group2[i]);try{chart=c3.generate({bindto:"#traffic-histogram",size:{height:$scope.histogramHeight},padding:{top:20,right:40,bottom:20,left:100},data:{x:"date",columns:[$scope.timeseries,$scope.group1,$scope.group2]},axis:{x:{type:"timeseries",tick:{format:$scope.dateFormatter,count:theTickCount}},y:{min:0,tick:{format:function(value){return d3.format(",")(value)}}}},grid:{y:{lines:[{value:0}],show:!0},x:{show:!0}},subchart:{show:!1},zoom:{enabled:!1},tooltip:{format:{value:function(value,ratio,id){return d3.format(",")(value)}}}})}catch(err){$translate("messages.topology.warning-message").then(function(translation){$scope.alertMessage=translation}),$scope.alert("info",$scope.alertMessage)}}else $("#traffic-histogram").html("<div style='height: 320px; position: relative;text-align: center; color: red; padding-top:100px;'><span class='fa fa-exclamation-triangle'></span>  We're sorry, there was a problem displaying the chart.<br/>There is no data available.</div>"),$rootScope.$broadcast("finishedProgress","fountain");$rootScope.$broadcast("finishedProgress","fountain"),$rootScope.isHistogramChartLoading=!1},function(error){$scope.getHTTPErrorMessage(error.status);$translate("messages.topology.error-message-2").then(function(translation){$scope.alertMessage=translation+" - "+error.status}),$scope.alert("warning",$scope.alertMessage),$rootScope.$broadcast("finishedProgress","fountain")})}}]}}]),angular.module("barCharts",[]).factory("barChart",function(){return{}}).directive("barChart",function(){return{restrict:"E",$scope:!0,templateUrl:"views/charts/bar/standard/index.html",controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createBarChart=function(data){$scope.closeAlert();try{c3.generate({bindto:"#barChart",padding:{top:0,right:0,bottom:0,left:30},data:{columns:data,type:"bar"},axis:{x:{type:"bar"}},grid:{y:{lines:[{value:0}],show:!0},x:{show:!1}}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("barChartsTwo",[]).factory("barChartTwo",function(){return{}}).directive("barChartTwo",function(){return{restrict:"E",$scope:!0,templateUrl:"views/charts/bar/standardtwo/index.html",controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createBarChartTwo=function(data){$scope.closeAlert();try{c3.generate({bindto:"#barChartTwo",padding:{top:0,right:0,bottom:0,left:60},data:{columns:data,type:"bar"},axis:{x:{type:"bar"}},grid:{y:{lines:[{value:0}],show:!0},x:{show:!1}}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("barClusterCharts",[]).factory("barClusterChart",function(){return{}}).directive("barClusterChart",function(){return{restrict:"E",$scope:!0,templateUrl:"views/charts/bar/cluster/index.html",controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.titleBarClusterChart="Threat Scores",$scope.descriptionBarClusterChart="",$scope.createBarClusterChart=function(data){$scope.closeAlert();try{c3.generate({bindto:"#barClusterChart",padding:{top:0,right:0,bottom:0,left:30},data:{columns:data,type:"bar"},axis:{x:{type:"bar"}},grid:{y:{lines:[{value:0}],show:!0},x:{show:!1}}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("pieCharts",[]).factory("pieChart",function(){return{}}).directive("pieChart",function(){return{restrict:"E",$scope:!0,templateUrl:"views/charts/pie/standard/index.html",controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createPieChart=function(data){$scope.closeAlert();try{c3.generate({bindto:"#pieChart",padding:{top:0,right:0,bottom:0,left:0},interaction:{enabled:!1},data:{columns:data,type:"pie",labels:!0},legend:{position:"bottom"}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("donutCharts",[]).factory("donutChart",function(){return{}}).directive("donutChart",function(){return{restrict:"E",$scope:!0,link:function(scope,element,attrs){scope.donutContentUrl="views/charts/donut/"+attrs.type+"/index.html",attrs.$observe("type",function(v){scope.donutContentUrl="views/charts/donut/"+attrs.type+"/index.html"})},template:'<div ng-include="donutContentUrl"></div>',controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createDonutChart=function(data){$scope.closeAlert();try{c3.generate({bindto:"#donutChart",padding:{top:0,right:0,bottom:0,left:0},interaction:{enabled:!1},data:{columns:data,type:"donut",labels:!0},legend:{position:"bottom"}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("lineCharts",[]).factory("lineChart",function(){return{}}).directive("lineChart",function(){return{restrict:"E",$scope:!0,templateUrl:"views/charts/line/standard/index.html",controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.titleLineChart="Threat Score Trend",$scope.descriptionLineChart="Threat score trends are how we determine when unusual network behavior happens. This chart shows the trend for the selected time period. ",$scope.createLineChart=function(data){$scope.closeAlert();try{c3.generate({bindto:"#lineChart",padding:{top:0,right:0,bottom:0,left:30},data:{columns:data,type:"line"},axis:{x:{type:"line"}},grid:{y:{lines:[{value:0}],show:!0},x:{show:!1}}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("timeseriesCharts",[]).factory("timeseriesChart",function(){return{}}).directive("timeseriesChart",function(){return{restrict:"E",$scope:!0,link:function(scope,element,attrs){scope.TimeseriesContentURL="views/charts/timeseries/"+attrs.type+"/index.html",attrs.$observe("type",function(v){scope.TimeseriesContentURL="views/charts/timeseries/"+attrs.type+"/index.html"})},template:'<div ng-include="TimeseriesContentURL"></div>',controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.dateFormatter="%m-%d (%H:%M)",$scope.createTimeseriesChart=function(data,chartLines,categories,id,pointSize,title,description){$scope.titleTimeseriesChart=title,$scope.descriptionTimeseriesChart=description,$scope.closeAlert();try{c3.generate({bindto:"#"+id,padding:{top:0,right:30,bottom:0,left:60},data:{x:"date",columns:data},point:{r:3},line:{show:!1},axis:{x:{type:"timeseries",localtime:!0,tick:{format:$scope.dateFormatter,count:data[0].length}}},grid:{y:{lines:chartLines,show:!0},x:{show:!0}},subchart:{show:!1},zoom:{enabled:!1}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("scatterPlotCharts",[]).factory("scatterPlotChart",function(){return{}}).directive("scatterPlotChart",function(){return{restrict:"E",$scope:!0,link:function(scope,element,attrs){scope.scatterPlotContentURL="views/charts/scatter/"+attrs.type+"/index.html",attrs.$observe("type",function(v){scope.scatterPlotContentURL="views/charts/scatter/"+attrs.type+"/index.html"})},template:'<div ng-include="scatterPlotContentURL"></div>',controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createScatterPlotChart=function(data,chartLines,categories,id){$scope.titleScatterPlotChart="",$scope.descriptionScatterPlotChart="",$scope.closeAlert();try{c3.generate({bindto:"#"+id,padding:{top:0,right:110,bottom:0,left:30},data:{columns:data,type:"scatter",labels:!0,colors:{Critical:"#ff0000",Major:"#ffa100",Minor:"#ffde0d"},color:function(color,d){return d.id&&"Minor"===d.id?d3.rgb(color).darker(d.value/150):color}},point:{r:8},axis:{x:{type:"category",tick:{}},y:{label:"Risk"}},legend:{position:"right"},grid:{y:{lines:chartLines,show:!1},x:{show:!1}},subchart:{show:!1},zoom:{enabled:!1},tooltip:{}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;$scope.alert("warning",errorMessage),$rootScope.$broadcast("finishedProgress","fountain")}$rootScope.$broadcast("finishedProgress","fountain")}}]}}),angular.module("print",[]).factory("print",function(){return{}}).directive("ngPrint",function(){function link(scope,element,attrs){element.on("click",function(){var elemToPrint=document.getElementById(attrs.printElementId);elemToPrint&&(printElement(elemToPrint),window.print())}),window.onafterprint=function(){printSection.innerHTML=""}}function printElement(elem){printSection.innerHTML="";var domClone=elem.cloneNode(!0);printSection.appendChild(domClone)}var printSection=document.getElementById("printSection");return printSection||(printSection=document.createElement("div"),printSection.id="printSection",document.body.appendChild(printSection)),{link:link,restrict:"A"}}),angular.module("pieChartStandard",[]).directive("pieChartStandard",function(){return{restrict:"E",$scope:!0,template:function(theElement,theAttributes){return theAttributes.template},controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.pieChart=function(data,element){$scope.closeAlert();try{c3.generate({bindto:element,padding:{top:0,right:0,bottom:0,left:0},size:{width:200,height:300},interaction:{enabled:!1},data:{columns:data,type:"pie",labels:!0},legend:{position:"bottom"}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;alert(errorMessage)}}}]}}),angular.module("timeseriesChartStandard",[]).directive("timeseriesChartStandard",function(){return{restrict:"E",$scope:!0,template:function(theElement,theAttributes){return theAttributes.template},controller:["$scope","$rootScope","$resource","$http","$filter",function($scope,$rootScope,$resource,$http,$filter){$scope.createTimeseriesChart=function(data,chartLines,categories,id,pointSize,title,description,element){try{c3.generate({bindto:element,padding:{top:0,right:30,bottom:0,left:60},data:{x:"date",columns:data,colors:{Critical:"#ff0000",Major:"#ffa100",Minor:"#ffde0d"}},point:{r:pointSize},line:{show:!1},axis:{x:{type:"timeseries",localtime:!0,tick:{format:"%m-%d (%H:%M:%S)",count:11}}},grid:{y:{lines:chartLines,show:!0},x:{show:!0}},subchart:{show:!1},zoom:{enabled:!0}})}catch(err){var errorMessage="We're sorry there has been an error displaying the chart. "+err;alert(errorMessage)}}}]}}),angular.module("formDirectives",[]).factory("formDirectives",function(){return{}}).directive("assetGroupForm",function(){return{scope:!1,restrict:"E",templateUrl:"views/forms/provisioning/assetgroups/index.html",controller:["$scope","$resource","baseUrl",function($scope,$resource,baseUrl){}]}}),angular.module("ChartsC3",[]).directive("barChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createBarChart3=function(data,categories,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{
height:settings.height},data:{columns:[data],type:"bar",onclick:function(d,i){$scope.chart3Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})},$scope.createBarChart4=function(data,categories,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:[data],type:"bar",onclick:function(d,i){$scope.chart4Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})},$scope.createBarChart5=function(data,categories,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:[data],type:"bar",onclick:function(d,i){$scope.chart5Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d")}}}})},$scope.createBarChart6=function(data,categories,settings){console.log("data: "+JSON.stringify(data)),console.log("categories: "+JSON.stringify(categories));c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:[data],type:"bar",onclick:function(d,i){$scope.chart6Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})},$scope.createBarChart7=function(data,categories,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:[data],type:"bar",onclick:function(d,i){$scope.chart7Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})}}]}}).directive("stackedBarChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createStackedBarChart6=function(data,categories,groups,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:data,type:"bar",groups:[groups],onclick:function(d,i){$scope.chart6Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})},$scope.createStackedBarChart7=function(data,categories,groups,settings){c3.generate({bindto:settings.element,color:{pattern:settings.color},size:{height:settings.height},data:{columns:data,type:"bar",groups:[groups],onclick:function(d,i){$scope.chart7Click(d)},onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},axis:{rotated:settings.rotated,x:{type:"category",categories:categories},y:{tick:{format:d3.format("d"),outer:!1}}}})},$scope.createStackedBarChart=function(data,settings){c3.generate({bindto:settings.element,color:{pattern:settings.colors},size:{width:settings.width,height:settings.height},data:{columns:[["data1",-30,200,200,400,-150,250],["data2",130,100,-100,200,-150,50]],type:"bar",groups:[["data1","data2"]],onmouseover:function(d,i){document.body.style.cursor="pointer"},onmouseout:function(d,i){document.body.style.cursor="default"}},grid:{y:{lines:[{value:0}]}}})}}]}}).directive("pieChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createPieChart=function(data,settings){c3.generate({bindto:settings.element,color:{pattern:settings.colors},size:{height:settings.height},data:{columns:data,type:"pie",onclick:function(d,i){$scope.chartTopFiveApplicationsClick(d.id)}},tooltip:{grouped:!1,position:function(data,width,height,element){var x=event.offsetX;return{top:event.offsetY+20,left:x+10}},format:{value:function(value,ratio,id,index){return value>999?(value/1024).toFixed(0)+"gb":value<1?0!==value?(1024*value).toFixed(0)+"kb":0:value.toFixed(0)+"mb"}}},pie:{label:{format:function(value,ratio,id){return value>999?(value/1024).toFixed(0)+"gb":value<1?0!==value?(1024*value).toFixed(0)+"kb":0:value.toFixed(0)+"mb"}}}})},$scope.createPieChartCount=function(data,settings){c3.generate({bindto:settings.element,color:{pattern:settings.colors},size:{height:settings.height},data:{columns:data,type:"pie",onclick:function(d,i){$scope.chartThreatIndicatorOriginsClick(d.id)}},tooltip:{grouped:!1,position:function(data,width,height,element){var x=event.offsetX;return{top:event.offsetY+20,left:x+10}},format:{value:function(value,ratio,id,index){return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}},pie:{label:{format:function(value,ratio,id){return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}}})}}]}}).directive("donutChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createDonutChart=function(data,settings){var chart=c3.generate({bindto:settings.element,width:settings.width,height:settings.height,data:{columns:[["data1",30],["data2",120]],type:"donut",onclick:function(d,i){console.log("onclick",d,i)},onmouseover:function(d,i){console.log("onmouseover",d,i)},onmouseout:function(d,i){console.log("onmouseout",d,i)}},donut:{title:"Iris Petal Width"}});setTimeout(function(){chart.load({columns:[["setosa",.2,.2,.2,.2,.2,.4,.3,.2,.2,.1,.2,.2,.1,.1,.2,.4,.4,.3,.3,.3,.2,.4,.2,.5,.2,.2,.4,.2,.2,.2,.2,.4,.1,.2,.2,.2,.2,.1,.2,.2,.3,.3,.2,.6,.4,.3,.2,.2,.2,.2],["versicolor",1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3],["virginica",2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8]]})},1500),setTimeout(function(){chart.unload({ids:"data1"}),chart.unload({ids:"data2"})},2500)}}]}}).directive("lineChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createLineChart=function(data,settings){var midChart=settings.width/3;c3.generate({title:{text:settings.title},bindto:settings.element,size:{width:settings.width,height:settings.height},data:{columns:[["data1",30,200,100,400,150,250],["data2",50,20,10,40,15,25]]},grid:{x:{show:!0},y:{show:!0}},legend:{position:"right"},tooltip:{grouped:!0,position:function(data,width,height,element){return{top:0,left:midChart}}}})}}]}}).directive("areaChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createAreaChart=function(data,settings){c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},data:{columns:[["data1",300,350,300,0,0,0],["data2",130,100,140,200,150,50]],types:{data1:"area",data2:"area-spline"}}})}}]}}).directive("stackedAreaChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createStackedAreaChart=function(data,settings){c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},data:{columns:[["data1",300,350,300,0,0,120],["data2",130,100,140,200,150,50]],types:{data1:"area-spline",data2:"area-spline"},groups:[["data1","data2"]]}})}}]}}).directive("scatterChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createScatterChart=function(data,settings){c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},data:{xs:{setosa:"setosa_x",versicolor:"versicolor_x"},columns:[["setosa_x",3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3],["versicolor_x",3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8],["setosa",.2,.2,.2,.2,.2,.4,.3,.2,.2,.1,.2,.2,.1,.1,.2,.4,.4,.3,.3,.3,.2,.4,.2,.5,.2,.2,.4,.2,.2,.2,.2,.4,.1,.2,.2,.2,.2,.1,.2,.2,.3,.3,.2,.6,.4,.3,.2,.2,.2,.2],["versicolor",1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3]],type:"scatter"},axis:{x:{label:"Sepal.Width",tick:{fit:!1}},y:{label:"Petal.Width"}}})}}]}}).directive("gaugeChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createGaugeChart=function(data,settings){c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},data:{columns:[["data",91.4]],type:"gauge",onclick:function(d,i){console.log("onclick",d,i)},onmouseover:function(d,i){console.log("onmouseover",d,i)},onmouseout:function(d,i){console.log("onmouseout",d,i)}},gauge:{},color:{pattern:["#FF0000","#F97600","#F6C600","#60B044"],threshold:{values:[30,60,90,100]}},size:{height:180}})}}]}}).directive("combinationLineBarChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createCombinationLineBarChart=function(data,settings){var midChart=settings.width/3;settings.height,c3.generate({title:{text:settings.title},bindto:settings.element,size:{width:settings.width,height:settings.height},data:{columns:[["Restricet Host Access",3,3,4,5,5,5],["Severity",30,30,50,60,70,100],["Confidence",50,50,50,70,90,100]],type:"bar",types:{Severity:"line",Confidence:"line"},groups:[["Zero Day Malware","Compromised Credentials","DDos Attack"]]},grid:{x:{show:!0},y:{show:!0},y2:{show:!0}},legend:{position:"right"},tooltip:{grouped:!0,position:function(data,width,height,element){return{top:-400,left:midChart}}}})}}]}}).directive("timeSeriesChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createTimeSeriesChart=function(data,settings){c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},data:{x:"x",columns:[["x","2013-01-01","2013-01-02","2013-01-03","2013-01-04","2013-01-05","2013-01-06"],["data1",30,200,100,400,150,250],["data2",130,340,200,500,250,350]]},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}}},legend:{position:"right"},tooltip:{grouped:!0,position:function(data,width,height,element){return{top:0,left:0}}}})}}]}}).directive("combinationTimeSeriesBarChartC3",function(){return{restrict:"E",link:function(scope,element,attrs){},controller:["$scope","$rootScope","$resource","$http","$filter","$cookies","DateMath",function($scope,$rootScope,$resource,$http,$filter,$cookies,DateMath){$scope.createCombinationTimeSeriesBarChart=function(data,settings,interval){var midChart=settings.width/3,topChart=settings.height;switch(navigator.language){case"en-US":$scope.dateFormatter="hour"===interval?"%Y-%m-%d %H:%M":"%m-%d";break;case"en-GB":case"en-IN":$scope.dateFormatter="hour"===interval?"%d-%m-%Y %H:%M":"%d-%m";break;case"de":case"el":$scope.dateFormatter="hour"===interval?"%d.%m.%Y %H:%M":"%d.%m";break;case"jp":default:$scope.dateFormatter="hour"===interval?"%d-%m-%Y %H:%M":"%d-%m"}c3.generate({bindto:settings.element,size:{width:settings.width,height:settings.height},color:{pattern:["#3B9BB5","#78D22D","#E30F74","#FBB300","#00A4D1","#6680C6","#287CDF","#AF413E","#8BA94A","#6B5289","#c7c7c7","#bcbd22","#dbdb8d","#9edae5","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2"],pattern1:["#00cc66","#006699","#7094db","#0000cc","#9932cc","#d01916","#f78b0e"],pattern2:["#1f77b4","#ff7f0e","#2ca02c","#e31916","#9467bd","#17becf"],pattern3:["#c7c7c7","#bcbd22","#dbdb8d","#9edae5","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2"]},data:data,axis:{x:{type:"timeseries",localtime:settings.localTime,tick:{format:$scope.dateFormatter,rotate:settings.xTickRotation},label:{text:settings.xLabelText,position:settings.xLabelPosition}},y:{label:{text:settings.yLabelText,position:settings.yLabelPosition},tick:{format:d3.format("d")}},y2:{show:!0,label:{text:settings.y2LabelText,position:settings.y2LabelPosition},max:settings.y2Max,min:settings.y2Min,padding:settings.y2Padding}},tooltip:{position:function(data,width,height,element){return{top:-Math.abs(topChart),left:midChart}}},legend:{position:settings.legendPosition}})}}]}}),angular.module("gridshore.c3js.chart",[]),angular.module("gridshore.c3js.chart").directive("chartAxes",ChartAxes),angular.module("gridshore.c3js.chart").directive("chartAxis",ChartAxis),angular.module("gridshore.c3js.chart").directive("chartAxisX",ChartAxisX),angular.module("gridshore.c3js.chart").directive("chartAxisXTick",ChartAxisXTick),angular.module("gridshore.c3js.chart").directive("chartAxisY",ChartAxisY),angular.module("gridshore.c3js.chart").directive("chartAxisYTick",ChartAxisYTick),angular.module("gridshore.c3js.chart").directive("chartBar",ChartBar),angular.module("gridshore.c3js.chart").directive("c3chart",["$timeout",function(timeout){return C3Chart(timeout)}]),angular.module("gridshore.c3js.chart").directive("chartColors",ChartColors),angular.module("gridshore.c3js.chart").directive("chartColumn",ChartColumn),angular.module("gridshore.c3js.chart").controller("ChartController",ChartController),ChartController.$inject=["$scope","$timeout"],angular.module("gridshore.c3js.chart").directive("chartDonut",ChartDonut),angular.module("gridshore.c3js.chart").directive("chartEvents",ChartEvents),angular.module("gridshore.c3js.chart").directive("chartGauge",ChartGauge),angular.module("gridshore.c3js.chart").directive("chartGrid",ChartGrid),angular.module("gridshore.c3js.chart").directive("chartGridOptional",ChartGridOptional),angular.module("gridshore.c3js.chart").directive("chartGroup",ChartGroup),angular.module("gridshore.c3js.chart").directive("chartLegend",ChartLegend),angular.module("gridshore.c3js.chart").directive("chartLine",ChartLine),angular.module("gridshore.c3js.chart").directive("chartPie",ChartPie),angular.module("gridshore.c3js.chart").directive("chartPoints",ChartPoints),angular.module("gridshore.c3js.chart").directive("chartRegion",ChartRegion),angular.module("gridshore.c3js.chart").directive("selection",Selection),angular.module("gridshore.c3js.chart").directive("chartSize",ChartSize),angular.module("gridshore.c3js.chart").directive("chartTooltip",ChartTooltip);